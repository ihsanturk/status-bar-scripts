#!/bin/sh

LANG=swift
LOGO='iVBORw0KGgoAAAANSUhEUgAAABAAAAAOCAYAAAAmL5yKAAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAABCgAwAEAAAAAQAAAA4AAAAAGL81EgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAApBJREFUKBU9UkloVEEQrer+f+Lggl6CG6hDVDRONPkRkbgMXowE8TSoIShezMW4IQbEZSIoBBEPHsQIEVEiJCIqmJOHHBUccEtQIjG5xFOQrH/r7rJ6Zn4K+v96Va9eV3U3QMWoAGLRz+el9ZPYVGHPioU7jSfoseeW4v3lfMJfJFKhrpoKtcts4vPZCrlSFHR5F4Kbje+SokS8hOeveWvCS17WgrDTa6Wr9WutP9pRU0WVbsq5hn9hZ0O/9QkAiQCF/Sy9W/xrQGdVR/3JqTS8iUO4EXbUb9/88HcIMCK5q5QtwoBepKrcvH9+5xm0Gu2eszh3+sGXPqNMU/Wk6galn0CsnwXtdUdxYDiCqZD5bJEZhnkNIqLrdHHXSuwpxgIRKJkn9ejrOVJmC8xRDwT0iolPg9M7rmCpExbwScCsgpTCTDxtjllNwbMILIBJZnV7vx+GmAL0zW0umKgCcS88XjtI+b1pCvUG8A0fFFcF5mBJgHsz5HkuDgzoRCTV92MfxvTBJWxQM7GfAnFEq5lREdApNaeMFeDzyJQ7yG1cgsVibAGMjQlibF339UiLno1fOlqk1bSKZWTWORGt5p0jXjyO9i1PaJlqVrmtbRZYIRwaD6xvzRn82aoWdJcTk6sWjNK+NhjyOQTcQUTjloOUyzk6muwFMgfI4HOU8JEUzqAwq3i8bYTYIhH3a75vQNBcEyFgmtGkNKKpfD0cjRtr7jtSXraqoLlFWyD5lg0xJH4PICSCC4JjNuc6YKK4G9kV9iBtHdVmdvMWt9BAs5BC2ufGu5YX/4w2s4zfs/uJh2jmp7i+1AHzEHI5iUNDipMQZjJZR5pDQJhlkeU86DyHvwlJb/HXxB/LsUY1m9r+A+cLQunwQnKiAAAAAElFTkSuQmCC'
COLOR=#3D395A
PUP=${HOME}/go/bin/pup
URL="https://github.com/trending/${LANG}?since=daily"
dir=/Volumes/SDB/personal/.trends/github/$LANG
file=$dir/$(date +%s).html
mkdir -p "$dir"

curl -s "$URL" > "$file"

echo "| color=$COLOR templateImage=$LOGO"
echo ---
$PUP 'article > h1 > a attr{href}' < "$file" | cut -c2- | head |
	sed 's/\(.*\)/\1 | href=https:\/\/github.com\/\1/g' | sed 's/\// \/ /'
echo ---
echo "â†» Refresh | terminal=false refresh=true"
